<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FITF Character Sheet</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <h1>âš  Fear in the Foundation âš </h1>

        <div class="section">
            <div class="section-title">Combat Status</div>
            <div class="health-bar-container">
                <div class="health-bar" id="healthBar">
                    <span id="healthText">20 / 20</span>
                </div>
            </div>
            <div class="combat-section">
                <button onclick="rollAttack()">âš” Attack</button>
                <div class="dice-result-container">
                    <div class="dice-result" id="attackRoll">-</div>
                    <div class="dice-notation" id="attackNotation"></div>
                </div>
                <div class="dice-result-container">
                    <div class="dice-result" id="damageRoll">-</div>
                    <div class="dice-notation" id="damageNotation"></div>
                </div>
            </div>
            <div class="damage-input-group">
                <div class="stat-group">
                    <label>Damage Amount:</label>
                    <div class="stat-input-wrapper">
                        <button class="stat-button" onclick="adjustDamage(-1)">-</button>
                        <input type="number" id="damageInput" placeholder="0" min="0" style="text-align: center;">
                        <button class="stat-button" onclick="adjustDamage(1)">+</button>
                    </div>
                </div>
                <select id="damageTypeSelect" style="width: 180px;">
                    <option value="physical">Physical</option>
                    <option value="heat">Heat</option>
                    <option value="cold">Cold</option>
                    <option value="electrical">Electrical</option>
                    <option value="chemical">Chemical</option>
                    <option value="explosive">Explosive</option>
                    <option value="light">Light</option>
                    <option value="sound">Sound</option>
                    <option value="memetic">Memetic</option>
                    <option value="anomalous">Anomalous</option>
                </select>
                <button onclick="takeDamageByType()">ðŸ’” Take Damage</button>
                <button onclick="heal()">ðŸ’š Heal</button>
                <button onclick="resetHealth()">ðŸ”„ Reset HP</button>
            </div>
            <div class="damage-reduction-display" id="damageReductionDisplay"></div>
            <div class="info-display">
                <div class="info-item">
                    <div class="info-label">AC</div>
                    <div class="info-value" id="acDisplay">10</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Speed</div>
                    <div class="info-value" id="speedDisplay">8m</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Initiative</div>
                    <div class="info-value" id="initiativeDisplay">+0</div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Class & Subclass</div>
            <div class="grid">
                <div class="stat-group">
                    <label>Class:</label>
                    <select id="classSelect" onchange="updateAll()">
                        <option value="">Select Class</option>
                    </select>
                </div>
                <div class="stat-group">
                    <label>Subclass:</label>
                    <select id="subclassSelect" onchange="updateAll()">
                        <option value="">Select Subclass</option>
                    </select>
                </div>
                <div class="stat-group">
                    <label>Level:</label>
                    <input type="number" id="level" value="1" min="1" max="20" onchange="updateAll()">
                </div>
            </div>

            <!-- Character Import/Export Controls -->
            <div class="import-export-controls" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="downloadCharacter()" style="flex: 1; min-width: 150px;">
                    ðŸ’¾ Download Character
                </button>
                <label for="characterFileInput" style="flex: 1; min-width: 150px;">
                    <button type="button" onclick="document.getElementById('characterFileInput').click()" style="width: 100%;">
                        ðŸ“‚ Upload Character
                    </button>
                </label>
                <input type="file" id="characterFileInput" accept=".json" onchange="uploadCharacter(event)" style="display: none;">
            </div>

            <!-- Add class and subclass bonus displays -->
            <div class="bonus-display-container">
                <div class="bonus-display" id="classBonuses"></div>
                <div class="bonus-display" id="subclassBonuses"></div>
            </div>
        </div>

              <div class="section">
            <div class="stats-skills-container">
                <div class="attributes-column">
                    <div class="section-title">Attributes</div>
                    <div class="stat-group">
                        <label>STR:</label>
                        <div class="stat-input-wrapper">
                            <button class="stat-button" onclick="adjustStat('STR', -1)">-</button>
                            <input type="number" id="STR" value="0" min="-3" max="5" onchange="updateAll()">
                            <button class="stat-button" onclick="adjustStat('STR', 1)">+</button>
                        </div>
                        <div class="temp-stat-wrapper">
                            <button class="temp-stat-button" id="temp-STR-minus" onclick="adjustTempStat('STR', -1)">-</button>
                            <button class="temp-stat-button" id="temp-STR-plus" onclick="adjustTempStat('STR', 1)">+</button>
                        </div>
                    </div>
                    <div class="stat-group">
                        <label>AGI:</label>
                        <div class="stat-input-wrapper">
                            <button class="stat-button" onclick="adjustStat('AGI', -1)">-</button>
                            <input type="number" id="AGI" value="0" min="-3" max="5" onchange="updateAll()">
                            <button class="stat-button" onclick="adjustStat('AGI', 1)">+</button>
                        </div>
                        <div class="temp-stat-wrapper">
                            <button class="temp-stat-button" id="temp-AGI-minus" onclick="adjustTempStat('AGI', -1)">-</button>
                            <button class="temp-stat-button" id="temp-AGI-plus" onclick="adjustTempStat('AGI', 1)">+</button>
                        </div>
                    </div>
                    <div class="stat-group">
                        <label>DUR:</label>
                        <div class="stat-input-wrapper">
                            <button class="stat-button" onclick="adjustStat('DUR', -1)">-</button>
                            <input type="number" id="DUR" value="0" min="-3" max="5" onchange="updateAll()">
                            <button class="stat-button" onclick="adjustStat('DUR', 1)">+</button>
                        </div>
                        <div class="temp-stat-wrapper">
                            <button class="temp-stat-button" id="temp-DUR-minus" onclick="adjustTempStat('DUR', -1)">-</button>
                            <button class="temp-stat-button" id="temp-DUR-plus" onclick="adjustTempStat('DUR', 1)">+</button>
                        </div>
                    </div>
                    <div class="stat-group">
                        <label>KNO:</label>
                        <div class="stat-input-wrapper">
                            <button class="stat-button" onclick="adjustStat('KNO', -1)">-</button>
                            <input type="number" id="KNO" value="0" min="-3" max="5" onchange="updateAll()">
                            <button class="stat-button" onclick="adjustStat('KNO', 1)">+</button>
                        </div>
                        <div class="temp-stat-wrapper">
                            <button class="temp-stat-button" id="temp-KNO-minus" onclick="adjustTempStat('KNO', -1)">-</button>
                            <button class="temp-stat-button" id="temp-KNO-plus" onclick="adjustTempStat('KNO', 1)">+</button>
                        </div>
                    </div>
                    <div class="stat-group">
                        <label>POW:</label>
                        <div class="stat-input-wrapper">
                            <button class="stat-button" onclick="adjustStat('POW', -1)">-</button>
                            <input type="number" id="POW" value="0" min="-3" max="5" onchange="updateAll()">
                            <button class="stat-button" onclick="adjustStat('POW', 1)">+</button>
                        </div>
                        <div class="temp-stat-wrapper">
                            <button class="temp-stat-button" id="temp-POW-minus" onclick="adjustTempStat('POW', -1)">-</button>
                            <button class="temp-stat-button" id="temp-POW-plus" onclick="adjustTempStat('POW', 1)">+</button>
                        </div>
                    </div>
                    <div class="stat-group">
                        <label>CHA:</label>
                        <div class="stat-input-wrapper">
                            <button class="stat-button" onclick="adjustStat('CHA', -1)">-</button>
                            <input type="number" id="CHA" value="0" min="-3" max="5" onchange="updateAll()">
                            <button class="stat-button" onclick="adjustStat('CHA', 1)">+</button>
                        </div>
                         <div class="temp-stat-wrapper">
                            <button class="temp-stat-button" id="temp-CHA-minus" onclick="adjustTempStat('CHA', -1)">-</button>
                            <button class="temp-stat-button" id="temp-CHA-plus" onclick="adjustTempStat('CHA', 1)">+</button>
                        </div>
                    </div>
                </div>
                <div class="skills-column">
                    <div class="section-title">Skills</div>
                    <div class="skill-grid" id="skillsGrid"></div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Equipment</div>
            <div class="equipment-grid">
                <div class="equipment-item">
                    <div class="stat-group">
                        <label>Weapon:</label>
                        <select id="weaponSelect" onchange="updateAll()">
                            <option value="">Select Weapon</option>
                        </select>
                    </div>
                    <div class="equipment-stats" id="weaponStats"></div>
                </div>
                <div class="equipment-item">
                    <div class="stat-group">
                        <label>Armor:</label>
                        <select id="armorSelect" onchange="updateAll()">
                            <option value="">Select Armor</option>
                        </select>
                    </div>
                    <div class="equipment-stats" id="armorStats"></div>
                </div>
                <div class="equipment-item">
                    <div class="stat-group">
                        <label>Helmet:</label>
                        <select id="helmetSelect" onchange="updateAll()">
                            <option value="">Select Helmet</option>
                        </select>
                    </div>
                    <div class="equipment-stats" id="helmetStats"></div>
                </div>
            </div>
        </div>


    <!-- ===== CONDITIONS ===== -->
    <div class="section">
    <div class="section-title">Conditions</div>

    <div class="condition-controls">
        <select id="conditionSelect">
        <option value="">â€” Add condition â€”</option>
        </select>
        <button onclick="addCondition()">âž• Add</button>
    </div>

    <ul id="conditionList" class="condition-list"></ul>

    <div id="conditionSummary" class="condition-summary"></div>
    </div>
</div>

<!-- ===== DICE SIDEBAR (LEFT) ===== -->
    <div id="diceSidebar" class="dice-sidebar">
        <button class="dice-toggle" onclick="toggleDiceSidebar()">
            <span id="diceToggleIcon">Ã¢â€“Â¶</span> Dice Roller
        </button>
        
        <div class="dice-content">
            <h2>ðŸŽ² Dice Roller</h2>
            
            <div class="dice-grid">
                <div class="dice-button" onclick="rollSingleDice(4)">
                    <div class="dice-face">d4</div>
                    <div class="dice-result" id="result-d4">-</div>
                </div>
                
                <div class="dice-button" onclick="rollSingleDice(6)">
                    <div class="dice-face">d6</div>
                    <div class="dice-result" id="result-d6">-</div>
                </div>
                
                <div class="dice-button" onclick="rollSingleDice(8)">
                    <div class="dice-face">d8</div>
                    <div class="dice-result" id="result-d8">-</div>
                </div>
                
                <div class="dice-button" onclick="rollSingleDice(10)">
                    <div class="dice-face">d10</div>
                    <div class="dice-result" id="result-d10">-</div>
                </div>
                
                <div class="dice-button" onclick="rollSingleDice(12)">
                    <div class="dice-face">d12</div>
                    <div class="dice-result" id="result-d12">-</div>
                </div>
                
                <div class="dice-button" onclick="rollSingleDice(20)">
                    <div class="dice-face">d20</div>
                    <div class="dice-result" id="result-d20">-</div>
                </div>
                
                <div class="dice-button" onclick="rollSingleDice(100)">
                    <div class="dice-face">d100</div>
                    <div class="dice-result" id="result-d100">-</div>
                </div>
            </div>
            
            <div class="custom-roll-section">
                <h3>Custom Roll</h3>
                <div class="custom-roll-input">
                    <input type="text" id="customDiceInput" placeholder="e.g., 2d6+3" />
                    <button onclick="rollCustomDice()">Roll</button>
                </div>
                <div class="custom-roll-result" id="customRollResult"></div>
            </div>
            
            <div class="roll-history">
                <h3>Roll History</h3>
                <div id="rollHistoryList" class="roll-history-list"></div>
                <button class="clear-history-btn" onclick="clearRollHistory()">Clear History</button>
            </div>
        </div>
    </div>

<!-- ===== BACKGROUND SIDEBAR ===== -->
    <div id="backgroundSidebar" class="background-sidebar">
        <button class="background-toggle" onclick="toggleBackgroundSidebar()">
            <span id="bgToggleIcon">â—€</span> Background
        </button>
        
        <div class="background-content">
            <h2>Character Background</h2>
            
            <div class="background-field">
                <label>
                    Ideal
                    <button class="help-button" onclick="showSuggestions('ideal')">?</button>
                </label>
                <input type="text" id="idealInput" placeholder="Enter your character's ideal..." onchange="saveBackground()">
            </div>
            
            <div class="background-field">
                <label>
                    Goal
                    <button class="help-button" onclick="showSuggestions('goal')">?</button>
                </label>
                <input type="text" id="goalInput" placeholder="Enter your character's goal..." onchange="saveBackground()">
            </div>
            
            <div class="background-field">
                <label>
                    Personality Traits
                    <button class="help-button" onclick="showSuggestions('personality')">?</button>
                </label>
                <textarea id="personalityInput" rows="3" placeholder="Enter 4-6 personality traits..." onchange="saveBackground()"></textarea>
            </div>
            
            <div class="background-field">
                <label>
                    Fear
                    <button class="help-button" onclick="showSuggestions('fear')">?</button>
                </label>
                <input type="text" id="fearInput" placeholder="Enter your character's fear..." onchange="saveBackground()">
            </div>
            

        </div>
    </div>

    <!-- Suggestion Modal -->
    <div id="suggestionModal" class="suggestion-modal" onclick="closeSuggestions(event)">
        <div class="suggestion-content" onclick="event.stopPropagation()">
            <div class="suggestion-header">
                <h3 id="suggestionTitle">Suggestions</h3>
                <button class="close-button" onclick="closeSuggestions()">Ã—</button>
            </div>
            <div id="suggestionList" class="suggestion-list"></div>
        </div>
    </div>

    <script src="js/dice.js"></script>
    <script src="js/character.js"></script>
    <script src="js/app.js"></script>
    <script src="js/Background.js"></script>

</body>
</html>
